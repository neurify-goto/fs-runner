# コードスタイルと規約

- PEP 8 準拠。関数・変数はスネークケース、クラスはパスカルケース。
- 型ヒント: 可能な限り付与（`typing`/`TypedDict` 利用例あり）。公開関数は戻り値含め明記。
- Docstring: モジュール/クラス/関数に短い要約（日本語可）、引数/戻り値/例外の説明は必要に応じて。
- フォーマッタ/リンタ: Black/Flake8（Ruff 併用可）。長文化しやすい関数は適度に分割。
- 例外処理: 例外の握り潰しを避け、ユーザに有益なメッセージとログを残す。再送/フォールバックは設定値に従う。
- ログ:
  - `form_sender/security/log_sanitizer.py` を用い、CI/CDログは企業名・URL・個人情報・環境変数値・本番のDBレコードIDをマスク。
  - GAS（私的環境）は企業名・URLのマスク対象外。ただし最小限の出力に留める。
  - ログレベル: INFO/WARNING/ERROR を使い分け、平文で機密値を出さない。
- 構成/秘密情報:
  - 機密（API鍵等）は `.env` に保存し、Git管理しない。開発時は `python-dotenv` で読み込む。
  - 非機密の定数・閾値は `config/*.json` に配置。
- DB時刻: DBへ保存する日時は常にJST（Asia/Tokyo）。
- 依存関係: `requirements.txt` を正とする（Poetry/pyproject でも可）。ライセンス・安全性を確認してから追加。
- ファイル配置: エントリは `src/` 直下、モジュールは機能別サブディレクトリ。テストは `tests/` に配置。ドキュメントは `docs/`、SQLは `scripts/`。
- DRY/リファクタ: 重複処理は統合。肥大化した関数は分割。未使用コードは積極的に削除。
